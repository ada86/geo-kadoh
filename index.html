<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Hi5 - The decentralized location sharing Web application</title>
	
	<!-- <script src="http://code.jquery.com/jquery-latest.js"></script> -->
	<script type="text/javascript" src="utils/jquery.js"></script>
	<link href="bootstrap/css/bootstrap.css" rel="stylesheet" media="screen">
	<script src="bootstrap/js/bootstrap.js"></script>

	<script type="text/javascript" src="KadOH.js?debug=true"></script>
	<script type="text/javascript" src="lib/locationUpdater.js"></script>
	<script type="text/javascript" src="lib/config.js"></script>
	<script type="text/javascript" src="lib/configManager.js"></script>
	<script type="text/javascript" src="lib/checkIn.js"></script>
	<script type="text/javascript" src="utils/sha1.js"></script>
	<script type="text/javascript" src="utils/cryptico.js"></script>
	<script type="text/javascript" src="utils/sjcl.js"></script>

	<script type="text/javascript">
		var kadohConfig = {
			bootstraps: ["127.0.0.1:3000", "127.0.0.1:3001", "127.0.0.1:3002"],
			reactor: {
				protocol: 'jsonrpc2',
				type: 'SimUDP',
				transport: {
				transports: ['xhr-polling']
					}
				}
			};
		node = new KadOH.Node(undefined, kadohConfig);
		node.connect(function() {
		console.log('connected');
		node.join(function() {
			console.log('joined');
			var peers = node._routingTable.howManyPeers();
			console.log('We got '+peers+' peers in routing table');
			log("Connection to the DHT succesful");
			});
		});

		
	</script>
</head>
<body>

  <div class="navbar navbar-fixed-top">
    <div class="navbar-inner">
      <div class="container">
        <a href="#" class="brand">Hi5! Geo-KadOH</a>
        <ul class="nav">
          <li class="active"><a href="#">Home</a></li>
          <li><a href="https://github.com/ada86/geo-kadoh">Source</a></li>
          <li><a href="https://github.com/ada86/geo-kadoh/blob/master/README.md">Documentation</a></li>
        </ul>
      </div>
    </div>
  </div>

<div class="container">
    
	<div class="hero-unit">
        <h1>Welcome to Hi5</h1>
        <p>Here comes the introduction text for geo-kadoh/hi5</p>
    </div>
    <div class="row">
        <div class="span4">
          <h2>Log in</h2>
          <label>Please enter your username</label>
		  <input id="myName" type=text onkeydown="if (event.keyCode == 13) document.getElementById('logIn').click()"/>
		  <button id="logIn" onClick="configManager.logIn(document.getElementById('myName').value, prompt('Enter your password', ''))">Log in</button> 
        </div>
        <div class="span4">
          <h2>Check in</h2>
		  <button id="btnGetnaddLocation" onClick="checkIn.putMyLocation()">Give my location to the cloud</button> 
        </div>
        <div class="span4">
          <h2>Find friend</h2>
          <label>Get friend:</label>
		  <input id="friendName" type=text onkeydown="if (event.keyCode == 13) document.getElementById('btnGetFriendLocation').click()"/>
		  <button id="btnGetFriendLocation" onClick="locationUpdater.getFriendLocation({name:document.getElementById('friendName').value})">Give me the location of a friend</button> 
        </div>
        <div class="span4">
          <h2>Output</h2>
          <p></p>
          <p id="output">I don't have any value :(</p>
	</div>
</div>
		<script type="text/javascript">
			var text = "";
			function log(txt){
				text = txt+"<br>".concat(text);
				document.getElementById("output").innerHTML=text;
			}
		</script>

	<hr>
    <footer>
      <p><strong>Abdalla Taha</strong> and <strong>Lorenzo Rand</strong></p>
    </footer>
  
</body>
</html>
